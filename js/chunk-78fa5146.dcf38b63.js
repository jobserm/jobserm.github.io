(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78fa5146"],{"2b5d":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"job infomation"},[o("JobCard")],1)},a=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.isLoading?o("loading"):t._e(),t.isLoading?t._e():o("div",[o("c-text",{attrs:{fontSize:"4xl",ml:"11%",mt:"2rem"}},[t._v(t._s("งานทั้งหมด"))]),o("c-flex",[o("c-input-group",{staticClass:"input",attrs:{size:"sm",rounded:"md"}},[o("c-input",{attrs:{borderColor:"black",ml:"17rem","focus-border-color":"indigo.200",w:"60rem",mt:"1.5rem",h:"2.6rem",type:"phone",placeholder:"ค้นหา"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),o("c-flex",{attrs:{mt:"1.5rem",ml:"1rem"}},[o("c-select",{attrs:{id:"province"},model:{value:t.form.provinces,callback:function(e){t.$set(t.form,"provinces",e)},expression:"form.provinces"}},[o("option",{staticStyle:{display:"none"},attrs:{value:""}},[t._v("จังหวัด")]),t._l(t.provinces.data,(function(e){return o("option",{key:e.id},[t._v(t._s(e.province))])}))],2),o("c-select",{attrs:{ml:"3",id:"type"},model:{value:t.form.compensation,callback:function(e){t.$set(t.form,"compensation",e)},expression:"form.compensation"}},[o("option",{staticStyle:{display:"none"},attrs:{value:""}},[t._v(" ค่าตอบแทน")]),o("option",[t._v("3,000 - 4,000")]),o("option",[t._v("4,100 - 5,000")]),o("option",[t._v("5,100 - 6,000")]),o("option",[t._v("6,100 - 7,000")]),o("option",[t._v("7,100 - 8,000")]),o("option",[t._v("8,100 - 9,000")]),o("option",[t._v("9,100 - 10,000")]),o("option",[t._v("11,000 - 20,000")]),o("option",[t._v("21,000 - 40,000")]),o("option",[t._v("41,000 - 60,000")])]),o("c-button",{attrs:{ml:"10",w:"15rem","variant-color":"indigo",variant:"outline"},on:{click:function(e){return t.search(t.title,t.form.provinces,t.form.compensation,t.form.category)}}},[t._v(" ค้นหา ")]),o("c-button",{attrs:{ml:"1rem",w:"15rem",bg:"#F22BB2"},on:{click:function(e){return t.clear()}}},[t._v(" clear ")])],1)],1),-1===this.count_job?o("c-text",{attrs:{fontSize:"5xl",align:"center",color:"red",mt:"4rem"}},[t._v("ไม่มีงานที่ค้นหา")]):t._e(),o("c-simple-grid",{attrs:{columns:[1,1,1,6],spacing:"10",m:"10"}},t._l(t.paginated,(function(e){return o("div",{key:e.id},[o("c-box",{attrs:{mt:"4rem",m:"2rem",maxW:"sm","border-width":"3px",rounded:"lg",overflow:"hidden","border-color":"black",_hover:{bg:"indigo.100",borderColor:"indigo"},fontSize:"xl"}},[o("c-image",{attrs:{src:e.image[0].path,alt:"cat"}}),o("c-box",{attrs:{p:"6"}},[o("c-box",{attrs:{d:"flex","align-items":"baseline"}},["AVAILABLE"===e.working_status?o("c-badge",{attrs:{rounded:"full",px:"5","variant-color":"green","font-size":"0.75em"}},[t._v(" AVALIABLE ")]):t._e(),"IN PROGRESS"===e.working_status?o("c-badge",{attrs:{rounded:"full",px:"5","variant-color":"yellow","font-size":"0.75em"}},[t._v(" IN PROGRESS ")]):t._e(),"FINISH"===e.working_status?o("c-badge",{attrs:{rounded:"full",px:"5","variant-color":"red","font-size":"0.75em"}},[t._v(" FINISH ")]):t._e(),o("c-box",{attrs:{color:"gray.500","font-weight":"semibold","letter-spacing":"wide","font-size":"0.75em","text-transform":"uppercase",ml:"2"}},[t._v(" "+t._s(e.province)+" • "+t._s(e.category_name[0].category_name)+" ")])],1),o("c-box",{attrs:{mt:"1","font-weight":"semibold",as:"h4","line-height":"tight","is-truncated":""}},[t._v(" "+t._s(e.title)+" ")]),o("c-box",[t._v(" "+t._s(e.description)+" ")]),o("c-box",{attrs:{mt:"1.5rem","font-weight":"semibold",as:"h4","line-height":"tight","is-truncated":""}},[t._v(" "+t._s("คุณสมบัติที่ต้องการ")+" ")]),o("c-box",[t._v(" "+t._s(e.requirement)+" ")]),o("c-box",{attrs:{mt:"1.5rem","font-weight":"semibold",as:"h4","line-height":"tight","is-truncated":""}},[t._v(" "+t._s("ค่าจ้าง")+" ")]),o("c-box",[t._v(" "+t._s(e.compensation)+" บาท/ชม ")]),o("c-flex",{attrs:{jusify:"center"}},[e.apply?t._e():o("c-button",{attrs:{mt:"1rem",bgColor:"black",color:"white",size:"lg",_hover:{bg:"pink.400"}}},[o("a",t._b({attrs:{href:"#/job/"+e.id},on:{click:function(o){return t.value(e.id)}}},"a",e,!1),[t._v("รายละเอียดงาน")])])],1),e.apply?o("c-flex",{attrs:{jusify:"center"}},[o("c-text",{attrs:{color:"red"}},[t._v("คุณสมัครงานนี้ไปแล้ว")])],1):t._e(),o("c-button",{attrs:{mt:"1rem",border:"1px",bgColor:"white",color:"red",size:"lg",_hover:{bg:"red",color:"white",borderColor:"red"}}},[o("a",t._b({on:{click:function(o){return t.report(e.id)}}},"a",e,!1),[t._v("REPORT")])])],1)],1)],1)})),0),o("div",{staticClass:"paginate"},[o("c-flex",{attrs:{mr:"3%",mb:"5rem"}},[o("c-button",{attrs:{w:"100px"},on:{click:t.prev}},[t._v(" Prev ")]),o("c-text",{attrs:{fontSize:"4xl"}},[t._v(" "+t._s(t.current))]),o("c-button",{attrs:{bg:"#F1E4FF",w:"100%"},on:{click:function(e){return t.next()}}},[t._v(" Next ")])],1)],1)],1)],1)},c=[],r=o("b529"),n=o("73ec"),l=o("bc3a"),g=o.n(l),h=o("e100"),d={components:{},data(){return{form:{provinces:"",category:"",compensation:"",working_status:""},title:"",jobs:{},JobA:[],count_job:0,payload_url:"",job_id:0,provinces:[],categories:[],compensation_array:[],less:0,most:0,user_id:0,user:[],pageIndex:1,current:1,pageSize:6,isLoading:!0,jobsApply:[]}},async created(){console.log("fetch================="),await this.fetchUser(),await this.fetchJobs(),await this.ftechJobUserApply(),console.log("fetch=================",this.user_id),this.getProvince(),this.getCategories(),this.isLoading=!1},computed:{indexStart(){return(this.current-1)*this.pageSize},indexEnd(){return this.indexStart+this.pageSize},paginated(){return this.JobA[0].slice(this.indexStart,this.indexEnd)}},methods:{async report(t){console.log("idididid",t);let e={id:t};await r["a"].dispatch("report",e),this.$swal("รายงานเสร็จสิ้น","ทางเราจะรีบตรวจสอบ","success")},async ftechJobUserApply(){let t={user_id:this.user_id,working_status:"AVAILABLE"};await r["a"].dispatch("fetchJobUserApply",t),this.jobsApply=r["a"].getters.getJobsThatUserApply,console.log("jobs L ",this.jobs.length),console.log("jobsApply L",this.jobsApply.length);for(let o=0;o<this.jobs.length;o++){var e=this.jobs[o];e["apply"]=!1;for(let t=0;t<this.jobsApply.length;t++)console.log("i",o),console.log("y",t),this.jobsApply[t].id==this.jobs[o].id&&(e["apply"]=!0,console.log("i--",this.jobsApply[t].id),console.log("y--",this.jobs[o].id))}},prev(){this.current>1&&this.current--},next(){this.current<this.jobs.length/6&&this.current++},fetchUser(){this.user=n["a"].getters.user,this.user_id=this.user.id,console.log("this.user==>",this.user)},async search(t,e,o,s){if(""!==o){this.compensatsion_array=o.split(" - "),console.log(this.compensatsion_array),this.less=Number(this.compensatsion_array[0].replace(",","")),this.most=Number(this.compensatsion_array[1].replace(",","")),this.compensatsion_array[0]=this.less,this.compensatsion_array[1]=this.most,console.log(this.compensatsion_array);let a={title:"%"+t+"%",province:"%"+e+"%",category:"%"+s+"%",compensatsion_array:this.compensatsion_array,check:0,user_id:this.user_id};console.log("payload",a),await r["a"].dispatch("fetchJobFromSearch",a)}else{let o={title:"%"+t+"%",province:"%"+e+"%",category:"%"+s+"%",check:1,user_id:this.user_id};console.log(t),await r["a"].dispatch("fetchJobFromSearch",o)}this.jobs=r["a"].getters.getJobFromSearch,console.log("jobs L ",this.jobs.data.length),console.log("jobsApply L",this.jobsApply.length);for(let i=0;i<this.jobs.data.length;i++){var a=this.jobs.data[i];a["apply"]=!1;for(let t=0;t<this.jobsApply.length;t++)console.log("i",i),console.log("y",t),this.jobsApply[t].id==this.jobs.data[i].id&&(a["apply"]=!0,console.log("i--",this.jobsApply[t].id),console.log("y--",this.jobs.data[i].id))}console.log("jobs = ",this.jobs.data),this.JobA.length=0,this.JobA.push(this.jobs.data),console.log("jobs",this.jobs.data.length),this.count_job=this.jobs.data.length,console.log("count_job",this.count_job),0==this.count_job&&(this.count_job=-1),this.current=1,console.log("count_job",this.count_job),this.$forceUpdate()},async getProvince(){let t=await g.a.get("https://thaiaddressapi-thaikub.herokuapp.com/v1/thailand/provinces");this.provinces=t.data},async getCategories(){await h["a"].dispatch("fetchData"),this.categories=h["a"].getters.getCategories},async fetchJobs(){let t=this.user_id;await r["a"].dispatch("fetchJobAvaliableNotLogedIn",t),console.log("this.JobA",this.JobA),this.jobs=r["a"].getters.getAvaJobNotLogIn,this.JobA.push(this.jobs),console.log("this.JobA",this.JobA),console.log("fetchJobAVA")},async value(t){await r["a"].dispatch("fetchJobById",t)},async clear(){let t=this.user_id;await r["a"].dispatch("fetchJobAvaliableNotLogedIn",t),this.jobs=r["a"].getters.getAvaJobNotLogIn,this.form.provinces="",this.form.category="",this.form.compensation="",this.form.working_status="",this.title="",this.current=1,this.JobA.length=0,this.JobA.push(this.jobs),this.count_job=this.jobs.length,console.log("this.pageIndex",this.pageIndex);for(let o=0;o<this.jobs.length;o++){var e=this.jobs[o];e["apply"]=!1;for(let t=0;t<this.jobsApply.length;t++)console.log("i",o),console.log("y",t),this.jobsApply[t].id==this.jobs[o].id&&(e["apply"]=!0,console.log("i--",this.jobsApply[t].id),console.log("y--",this.jobs[o].id))}this.$forceUpdate()}},colors:{purple:"#9356F7"}},p=d,b=(o("8e99"),o("2877")),m=Object(b["a"])(p,i,c,!1,null,null,null),u=m.exports;const y=o("eb99");y(m,{CText:o("89e8").CText,CInput:o("89e8").CInput,CInputGroup:o("89e8").CInputGroup,CSelect:o("89e8").CSelect,CButton:o("89e8").CButton,CFlex:o("89e8").CFlex,CImage:o("89e8").CImage,CBadge:o("89e8").CBadge,CBox:o("89e8").CBox,CSimpleGrid:o("89e8").CSimpleGrid});var f={components:{JobCard:u},data(){return{form:{provinces:"",category:"",compensation:"",working_status:""},jobs:{},provinces:[],categories:[]}},async created(){this.getProvince(),this.getCategories()},methods:{async fetchJobs(){await r["a"].dispatch("fetchJob"),this.jobs=r["a"].getters.jobs,console.log("this.jobs"),console.log(this.jobs)},async getProvince(){let t=await g.a.get("https://thaiaddressapi-thaikub.herokuapp.com/v1/thailand/provinces");this.provinces=t.data},async getCategories(){await h["a"].dispatch("fetchData"),this.categories=h["a"].getters.getCategories}}},_=f,v=Object(b["a"])(_,s,a,!1,null,null,null);e["default"]=v.exports},"8e99":function(t,e,o){"use strict";o("f7de")},b529:function(t,e,o){"use strict";var s=o("2b0e"),a=o("2f62"),i=o("3ff5"),c=o("ac20");s["default"].use(a["a"]),e["a"]=new a["a"].Store({state:{posts:[],data:[],JobById:[],allJobs:[],JobSuggest:[],fetchRemark:[],fetchUserFinish:[],jobByUser:[],jobFromSearch:[],JobAvaNotLogIn:[],AllJobsAvaNotLogIn:[],JobsThatUserApply:[],recentlyPostedJob:[]},getters:{posts:t=>t.posts,jobs:t=>t.data,job_filtered:t=>t.JobById,getAllJobs:t=>t.allJobs,getJobSuggest:t=>t.JobSuggest,getUserFinish:t=>t.fetchUserFinish,getJobByUser:t=>t.jobByUser,getJobById:t=>t.JobById,getJobFromSearch:t=>t.jobFromSearch,getAvaJobNotLogIn:t=>t.JobAvaNotLogIn,getAllJobsAvaNotLogIn:t=>t.AllJobsAvaNotLogIn,getJobsThatUserApply:t=>t.JobsThatUserApply,getRecentlyPostedJob:t=>t.recentlyPostedJob},mutations:{async fetch(t,{res:e}){t.data=(await e).data},async fetchById(t,{res:e}){t.JobById=(await e).data},async fetchJobUserApply(t,{res:e}){t.JobsThatUserApply=(await e).data},async fetchSuggest(t,{res:e}){t.JobSuggest=(await e).data},async fetchAllAvaJobNotLogIn(t,{res:e}){t.AllJobsAvaNotLogIn=(await e).data},async fetchByUser(t,{res:e}){t.jobByUser=await e},async fetchAvaJobNotLogIn(t,{res:e}){t.JobAvaNotLogIn=await e.data},async fetchFromSearch(t,{res:e}){t.jobFromSearch=(await e).data},addPost(t,e){t.posts.unshift(e)},setAllJobs(t,e){t.allJobs=e},addRemark(t,e){t.fetchRemark=e},fetchUserFinishJob(t,e){t.fetchUserFinish=e},setJobById(t,e){t.JobById=e},removeJob(t,e){t.allJobs=t.allJobs.map(t=>t.id!=e.id)},setRecentlyPostedJob(t,e){t.recentlyPostedJob=e}},actions:{async fetchJobSuggest({commit:t},e){console.log("fetchJobSuggest"),console.log("---id---",e);let o={id:e},s=await c["c"].post(`/api/jobs/${e}/get-rand-jobs`,o);console.log("JobSuggest",(await s).data),console.log("fetchJobSuggest"),t("fetchSuggest",{res:s})},async fetchData({commit:t}){let e=i["a"].getApiHeader(),o=await c["c"].get("/api/jobs",e);t("fetch",o)},async postJob({commit:t},e){try{let o=await c["c"].post("/api/jobs",e);if(201===o.status)return t("setRecentlyPostedJob",o.data),{success:!0}}catch(o){return{success:!1,message:"ตรวจสอบฟอร์มกรอกข้อมูลอีกครั้ง"}}},async fetchJob({commit:t}){try{let e=c["c"].get("/api/jobs");if(console.log("res = ",(await e).data),200===(await e).status)return console.log((await e).data),console.log("ดำะแ้ ่นิ"),t("fetch",{res:e}),{success:!0}}catch(e){return{success:!1}}},async report({commit:t},e){console.log(e);let o={id:e.id};console.log(o.id);await c["c"].get(`/api/jobs/${e.id}/report-inappropriate`)},async paginate({commit:t},e){console.log(e);let o={id:e.id};console.log(o.id);let s=await c["c"].post(e.url,o);console.log("route"),console.log("data from url"),console.log(await s),t("fetch",{res:s})},async paginate_post({commit:t},e){let o=c["c"].post(e);console.log("route"),console.log(e),console.log("data from url"),console.log((await o).data),t("fetch",{res:o})},async getJobByID({commit:t},e){let o=await c["c"].get("/api/jobs/"+e),s=o.data;return s},async fetchJobById({commit:t},e){console.log("---id---"),console.log(e);try{let o=await c["c"].get("/api/jobs/"+e);t("fetchById",{res:o}),console.log((await o).data)}catch(o){console.log(o.message)}console.log("fetchById")},async fetchJobFromSearch({commit:t},e){let o={title:e.title,province:e.province,category:e.category,compen:e.compensatsion_array,check:e.check,user_id:e.user_id};console.log("body",e);try{let e=await c["c"].post("/api/get-job-from-search",o);t("fetchFromSearch",{res:e}),console.log("s",e)}catch(s){console.log(s.message)}console.log("fetchJobFromSearch")},async fetchJobUserId({commit:t},e){console.log("---id---");let o={id:e.user_id,working_status:e.working_status};console.log(o);let s=await c["c"].post("/api/get-job-by-user-id",o);console.log((await s).data),console.log("fetchByUser"),t("fetchByUser",{res:s}),console.log("fetchByUser")},async fetchJobUserApply({commit:t},e){console.log("---id---");let o={id:e.user_id,working_status:e.working_status};console.log(o);let s=await c["c"].post("/api/get-job-apply",o);console.log((await s).data),console.log("fetchJobUserApply"),t("fetchJobUserApply",{res:s}),console.log("fetchJobUserApply")},async fetchJobAvaliableNotLogedIn({commit:t},e){console.log("fetchJobAvaliableNotLogedIn"),console.log("id",e);let o={id:e},s=await c["c"].post("api/jobs/get-avaliable-jobs-not-log-in",o);console.log(s),t("fetchAvaJobNotLogIn",{res:s})},async addRemarks({commit:t},e){try{console.log("payload.id---",e.id),console.log("payload.remark---",e.remark);let o={id:e.user_id,remark:e.remark};console.log("body.id---",o.id),console.log("body.remark---",o.remark);let s=await c["c"].post(`/api/jobs/${e.job_id}/apply-job`,o);return console.log("res",s),t("addRemark",{res:s}),{success:!0}}catch(o){return{success:!1,message:o.response.data}}},async fetchAllJobs({commit:t}){try{let e=await c["c"].get("/api/get-all-jobs");console.log("line 82",e.data),t("setAllJobs",e.data)}catch(e){console.log(e)}},async fetchUserFinish({commit:t},e){let o=await c["c"].get(`/api/jobs/${e}/finish-job`);console.log("finish job =>",o),t("fetchUserFinishJob",o)},async fetchJobByID({commit:t},e){try{let o=await c["c"].get("/api/jobs/"+e);t("setJobById",o.data)}catch(o){console.log(o.message)}},async removeJob({commit:t},{headers:e,id:o}){try{let e=await c["c"].delete("/api/jobs/"+o);t("removeJob",e.data)}catch(s){console.log(s.message)}},async employerSelectFreelancer({commit:t},e){try{let t={id:e.user_id};return await c["c"].put(`/api/jobs/${e.job_id}/select-freelancer`,t),{success:!0}}catch(o){return{success:!1,message:o.response.data}}}}})},e100:function(t,e,o){"use strict";var s=o("2b0e"),a=o("2f62"),i=o("ac20");s["default"].use(a["a"]),e["a"]=new a["a"].Store({state:{categories:[],categories_after_remove:[],category:{}},getters:{getCategories:t=>t.categories,getCategory:t=>t.category},mutations:{setCategories(t,e){t.categories=e},removeCategory(t,e){t.categories_after_remove=t.categories_after_remove.map(t=>t.id!=e.id)},setCategory(t,e){t.category=e}},actions:{async fetchData({commit:t}){let e=await i["c"].get("/api/categories");t("setCategories",e.data)},async removeCategory({commit:t},e){let o=await i["c"].delete("api/categories/"+e);t("removeCategory",o.data)},async fetchCategoryById({commit:t},e){let o=await i["c"].get("/api/categories/"+e);t("setCategory",o.data)},async editCategory({commit:t},e){await i["c"].put("/api/categories/"+e.id,e)},async addCategory({commit:t},e){await i["c"].post("/api/categories/",e)}},modules:{}})},f7de:function(t,e,o){}}]);
//# sourceMappingURL=chunk-78fa5146.dcf38b63.js.map